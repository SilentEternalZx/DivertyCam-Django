{% extends 'layout/layout.html' %}
{% load static %}

{% block title %}
Registro de usuario
{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'login/css/login.css' %}">
{% endblock %}

{% block content %}
<div class="login-main">
    <div class="login-container">
        <!-- Lado izquierdo: formulario de registro -->
        <div class="login-form-side">
            <div class="comeback-button">
                <a href="{% url 'index' %}">‚Üê Ir a inicio</a>
            </div>

        <!-- üìå Contenedor de errores en la parte superior -->
        <div id="error-container"></div>

        {% if errores %}
        <div id="error">
          <ul>
            {% for campo, mensaje in errores.items %}
            <li><strong>{{ campo }}:</strong> {{ mensaje }}</li>
            {% endfor %}
          </ul>
        </div>
        {% endif %}


            <form class="login-form" action="{% url 'register' %}" method="post" autocomplete="on" onsubmit="return validar_formulario()">
                {% csrf_token %}
                <h1 class="login-title">Crear cuenta</h1>
                <p class="login-desc">Completa los campos para registrarte</p>

                {% if messages %}
                    <div class="login-messages">
                        {% for message in messages %}
                            <p class="{% if message.tags == 'error' %}msg-error{% elif message.tags == 'success' %}msg-success{% else %}msg-info{% endif %}">
                                {{ message }}
                            </p>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="input-group">
                    <ion-icon name="person-outline"></ion-icon>
                    <input type="text" id="username" name="username" placeholder="Nombre de usuario" required autofocus onkeyup="verificar_username()">
                </div>
                <div class="input-group">
                    <ion-icon name="mail-outline"></ion-icon>
                    <input type="email" id="email" name="email" placeholder="Correo electr√≥nico" required onkeyup="verificar_email()">
                </div>
                <div class="input-group">
                    <ion-icon name="lock-closed-outline"></ion-icon>
                    <input type="password" id="password1" name="password1" placeholder="Contrase√±a" required autocomplete="new-password"  onkeyup="verificar_password()">
                </div>
                <div class="input-group">
                    <ion-icon name="lock-closed-outline"></ion-icon>
                    <input type="password" id="password2" name="password2" placeholder="Confirmar contrase√±a" required autocomplete="new-password"  onkeyup="verificar_password()">
                </div>
                <div class="login-links">
                    <a href="{% url 'login' %}">¬øYa tienes una cuenta? Inicia sesi√≥n</a>
                </div>
                <button class="login-btn" type="submit">Registrarme</button>
            </form>
        </div>
        <!-- Lado derecho: mensaje de bienvenida -->
        <div class="login-shape-side">
            <div class="shape-content">
                <h2>¬°Bienvenido!</h2>
                <p>Crea tu cuenta para comenzar a disfrutar de todas las funcionalidades del sitio.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="{% static 'js/validaciones_register.js' %}?v=3"></script>
{% endblock %}